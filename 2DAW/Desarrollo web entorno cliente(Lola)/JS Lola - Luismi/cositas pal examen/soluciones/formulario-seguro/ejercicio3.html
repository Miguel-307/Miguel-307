<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Calcula el Seguro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        form {
            max-width: 500px;
            margin: auto;
            background: white;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        label {
            font-weight: bold;
            display: block;
            margin: 10px 0 5px;
        }

        input,
        select,
        button {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        input:focus,
        select:focus,
        button:focus {
            outline: none;
            border-color: #007bff;
        }

        .error {
            color: red;
            font-size: 0.85em;
            margin: -10px 0 10px;
        }

        .success {
            color: green;
            font-size: 1em;
            text-align: center;
        }

        button {
            background-color: #007bff;
            color: white;
            font-size: 1em;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <h1>Calcula el precio de tu seguro</h1>
    <form id="insuranceForm">
        <label for="name">Nombre y Apellidos:</label>
        <input type="text" id="name" name="name" placeholder="Juan Pérez">
        <span class="error" id="nameError"></span>

        <label for="postalCode">Código Postal:</label>
        <input type="text" id="postalCode" name="postalCode" placeholder="28001">
        <span class="error" id="postalCodeError"></span>

        <label for="age">Edad del Conductor:</label>
        <input type="number" id="age" name="age" placeholder="18-99">
        <span class="error" id="ageError"></span>

        <label for="brand">Marca del Coche:</label>
        <select id="brand" name="brand">
            <option value="">Selecciona una marca</option>
            <option value="Toyota">Toyota</option>
            <option value="Honda">Honda</option>
            <option value="Ford">Ford</option>
        </select>
        <span class="error" id="brandError"></span>

        <label for="years">Años de Antigüedad del Coche:</label>
        <input type="number" id="years" name="years" placeholder="0 o más">
        <span class="error" id="yearsError"></span>

        <label for="licensePlate">Placa de Vehículo:</label>
        <input type="text" id="licensePlate" name="licensePlate" placeholder="1234 ABC">
        <span class="error" id="licensePlateError"></span>

        <button type="button" id="calculate">Calcular precio</button>
    </form>

    <p class="success" id="result"></p>

    <script>
        const form = document.getElementById('insuranceForm');
        const calculateButton = document.getElementById('calculate');
        const result = document.getElementById('result');

        const errors = {
            name: document.getElementById('nameError'),
            postalCode: document.getElementById('postalCodeError'),
            age: document.getElementById('ageError'),
            brand: document.getElementById('brandError'),
            years: document.getElementById('yearsError'),
            licensePlate: document.getElementById('licensePlateError'),
        };

        function validateForm() {
            let isValid = true;

            const name = document.getElementById('name').value.trim();
            const nameRegex = /^[A-Za-zÁÉÍÓÚáéíóúñÑ]+( [A-Za-zÁÉÍÓÚáéíóúñÑ]+)*$/;
            if (!nameRegex.test(name)) {
                errors.name.textContent = 'El nombre debe ser válido (ej.: Juan Pérez).';
                isValid = false;
            } else {
                errors.name.textContent = '';
            }

            const postalCode = document.getElementById('postalCode').value.trim();
            const postalCodeRegex = /^\d{5}$/;
            if (!postalCodeRegex.test(postalCode)) {
                errors.postalCode.textContent = 'El código postal debe tener 5 dígitos.';
                isValid = false;
            } else {
                errors.postalCode.textContent = '';
            }

            const age = parseInt(document.getElementById('age').value, 10);
            if (isNaN(age) || age < 18 || age > 99) {
                errors.age.textContent = 'La edad debe estar entre 18 y 99 años.';
                isValid = false;
            } else {
                errors.age.textContent = '';
            }

            const brand = document.getElementById('brand').value;
            if (!brand) {
                errors.brand.textContent = 'Debes seleccionar una marca.';
                isValid = false;
            } else {
                errors.brand.textContent = '';
            }

            const years = parseInt(document.getElementById('years').value);
            if (isNaN(years) || years < 0) {
                errors.years.textContent = 'La antigüedad debe ser un número positivo.';
                isValid = false;
            } else {
                errors.years.textContent = '';
            }

            const licensePlate = document.getElementById('licensePlate').value.trim();
            const licensePlateRegex = /^\d{4} [A-Z]{3}$/;
            if (!licensePlateRegex.test(licensePlate)) {
                errors.licensePlate.textContent = 'La placa debe seguir el formato 1234 ABC.';
                isValid = false;
            } else {
                errors.licensePlate.textContent = '';
            }

            return isValid;
        }

        function calculateInsurance() {
            if (!validateForm()) return;
            const name = document.getElementById('name').value.trim();
            const age = parseInt(document.getElementById('age').value, 10);
            const years = parseInt(document.getElementById('years').value, 10);
            let price = 500;
            if (age < 25) price += 200;
            price -= Math.min(200, years * 20);
            result.textContent = `Estimado/a ${name}, el precio estimado de tu seguro es: $${price}`;
        }

        calculateButton.addEventListener('click', calculateInsurance);

    </script>
</body>

</html>